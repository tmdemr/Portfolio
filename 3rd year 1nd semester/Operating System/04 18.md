# 프로세스 동기화

> 스핀 락 : 조건들을 계속 체크하는 연산  
> 세마포어의 가장 큰 두 가지 단점
> - 올바른 순서대로 잘 사용해야 하는데 잘 못 사용하면 DeadLock 문제가 생길 수 있음.  
> - 해결하기 위해 모니터 구조를 채택할 수 있음.

## 모니터
- 내부의 메소드가 전부 동기화가 되도록 만드는 동기화 방법
- next라는 세마포어를 추가적으로 사용

## 자바 모니터
- 임의의 자바 Thread가 키를 가지고 있음.
- 큐가 대기하고 있을 때 notify()함수를 사용하여 깨워줌.

## Windows XP의 동기화
- 스핀락 사용
  - CPU 코어가 여러 개라면 한 코어가 대기하고 있어도 다른 코어에는 별 상관이 없으니 상호 배제가 이루어지지 않음.
  - 멀티코어의 경우에는 스핀락을 사용할 수 있음.
- 디스패처 객체 제공
  - 뮤텍스와 세마포어처럼 동작
- 이벤트 객체 제공

## Linux 동기화
- 짧은 임계 영역을 구현하기 위해 인터럽트를 비활성화
- 제공하는 동기화 도구(커널 안에서 사용하는 도구)
  - 세마포어
  - 스핀락

> 원자적의 의미
> - 한 트랙젝션이 작업을 하는 동안에 다른 트렌잭션은 관여를 하지 않는 것을 의미.

> 문제 유형
> - 단답형
> - 개념 문제
> - 스케쥴링(계산 문제)(도착시간을 염두에 두어야 함.)

---
### 이하는 시험범위 포함 X
---


# 교착 상태
## 교착 상태 문제
- 대기중인 프로세스가 필요로 하는 자원들이 다른 대기중인 프로세스들에 의해 경쟁하는 상태가 되어 아무도 사용할 수 없는 상태가 되는 것을 교착상태라고 한다.
- 같은 종류 또는 다른 종류의 자원의 획득과 해제가 교착 상태 발생의 원인
- 교착 상태 발생의 네 가지 필요 조건
  - 상호 배제
  - 점유와 대기
  - 비선점
  - 순환 대기

## 교착 상태 예방
- 네 가지 발생 조건 중 하나만 성립하지 않도록 함.
  -   상호 배제
      -   상호 배제는 주변장치의 특성으로 인하여 피하기 어려움
  -   점유와 대기
      -   프로세스가 자원을 요청할 때는 언제나 다른 자원들을 점유하지 않도록 함
  - 비선점
    - 자원을 점유한 프로세스가 즉시 할당할 수 없는 다른 자원을 요청하면, 현재 점유하고 있는 모든 자원이 다 선점
  - 순환 대기 
    - 모든 자원들에게 번호 부여 - 전체 순서 결정

## 교착 상태 회피
- 교착 상태 예방
  - 장치 이용율 저하 및 시스템 처리율 감소
- 교착 상태 회피
  - 어느 상태에서 자원 할당을 한 결과가 교착을 유발할 수 있는가에 대한 추가 정보 필요
- 수학적인 방법으로 교착 상태를 회피함. 거의 정확

## 안정 상태 vs 불안정 상태
- 안정 순열 <P1,P2,P3...>가 존재함을 의미
- 시스템이 가진 자원보다 많은 자원을 프로세스가 요구하면 일단 대기.
- 자원을 가지고 있던 프로세스가 종료되면, 대기하던 프로세스는 자원을 얻고 프로세스를 끝마칠 수 있다.

- 불안정 상태
  - 이러한 안정 순열이 존재하지 않는 경우 교착 상태가 발생할 위험성이 항상 존재.

- 위의 상태를 가장 쉽게 확인하는 방법이 자원 할당 그래프임.